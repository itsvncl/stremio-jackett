<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Stremio-Jackett</title>
    <style>
        /*On va ajouter la photo de fond */
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Harbor_Seal_Chillin_%28213656373%29.jpeg/640px-Harbor_Seal_Chillin_%28213656373%29.jpeg');
            background-size: cover;
            margin: 0;
            padding: 0;
        }

        img {
            width: 100px;
            height: 100px;
            text-align: center;
            margin-left: auto;
            margin-right: auto;
        }

        .multipleSelection {
            width: 150px;
        }

        .selectBox {
            position: relative;
        }


        .overSelect {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
        }

        #languageCheckBoxes {
            display: none;
        }

        #languageCheckBoxes label {
            display: block;
        }

        label {
            color: white
        }

    </style>
</head>
<body class="backdrop-blur">
<div id="container" style="display: flex;justify-content: center;align-items: center;">
    <form style="padding: 2rem;border-radius: 1rem" class="bg-opacity-70 bg-white dark:bg-opacity-90 dark:bg-gray-900">
        <img src="https://user-images.githubusercontent.com/27040483/28728094-99f3e3f6-73c7-11e7-8f8d-28912dc6ac0d.png"
             alt="logo" style="width: 100px; height: 100px;">
        <div class="space-y-12">
            <p class="dark:text-white text-center">Stremio-Jackett-Hungary v1.1.0</p>
            <h1 class="text-base font-semibold leading-7 text-gray-900 dark:text-white"
                style="text-align: center;font-size: 2rem;">
                Addon configuration</h1>


            <div class="border-b border-gray-900/10 dark:border-white/50 pb-12">
                <h2 class="text-base font-semibold leading-7 text-gray-900 dark:text-white">Jackett Information</h2>
                <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">You will enter information about your
                    Jackett
                    server here</p>

                <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                    <div class="sm:col-span-3">
                        <label for="jackett-host" class="block text-sm font-medium mb-2 dark:text-white">Jackett
                            Host</label>
                        <div class="mt-2">
                            <input oninput="" type="text" name="jackett-host" id="jackett-host"
                                   autocomplete="jackett-host"
                                   class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                                   placeholder="I.e: http(s)://jackett.com without / at end">
                        </div>
                    </div>

                    <div class="sm:col-span-3">
                        <label for="jackett-api" class="block text-sm font-medium mb-2 dark:text-white">Jackett API
                            key</label>
                        <div class="mt-2">
                            <input oninput="" type="text" name="jackett-api" id="jackett-api" autocomplete="jackett-api"
                                   class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                                   placeholder="Your Jackett API key">
                        </div>
                    </div>
                </div>
            </div>


            <div class="border-b border-gray-900/10 dark:border-white/50 pb-12">
                <h2 class="text-base font-semibold leading-7 text-gray-900 dark:text-white">Debrid Information</h2>
                <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">You will enter your debrid provider
                    and its API
                    key here</p>

                <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                    <div class="sm:col-span-3">
                        <label for="service" class="block text-sm font-medium mb-2 dark:text-white">Debrid
                            Provider</label>
                        <div class="mt-2">
                            <select onchange="" id="service" name="service" autocomplete="service"
                                    class="py-3 px-4 pe-9 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600">
                                <option value="realdebrid">Real-Debrid</option>
                                <option value="alldebrid">All-Debrid</option>
                                <option value="premiumize">Premiumize</option>
                            </select>
                        </div>
                    </div>
                    <div class="sm:col-span-3">
                        <label for="debrid-api" class="block text-sm font-medium mb-2 dark:text-white">Debrid API
                            key</label>
                        <div class="mt-2">
                            <input oninput="" type="text" name="debrid-api" id="debrid-api" autocomplete="debrid-api"
                                   class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                                   placeholder="Your Debrid API key">
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-b border-gray-900/10 dark:border-white/50 pb-12">
                <h2 class="text-base font-semibold leading-7 text-gray-900 dark:text-white">Direct Torrenting</h2>
                <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">You will enter information about the
                    torrenting
                    settings</p>
                <br>
                <div class="relative flex gap-x-3">
                    <div class="flex items-center h-5">
                        <input oninput="" id="torrenting" name="torrenting" value="torrenting" type="checkbox"
                               class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    </div>
                    <div class="ms-2 text-sm">
                        <label for="torrenting" class="font-medium text-gray-900 dark:text-gray-300">Enable
                            torrenting</label>
                        <p class="text-xs font-normal text-gray-500 dark:text-gray-400">Enable direct torrenting <span
                                class="font-bold text-red-600 dark:text-red-500">(ATTENTION: this is illegal in some
                            countries)</span></p>
                    </div>
                </div>
            </div>

            <div class="border-b border-gray-900/10 dark:border-white/50 pb-12">
                <h2 class="text-base font-semibold leading-7 text-gray-900 dark:text-white">TMDB Informations</h2>
                <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">You will enter here informations
                    about TMDB. You can
                    find your API key in "Settings" after registering <a href="https://www.themoviedb.org/signup"
                                                                         target="_blank">here</a></p>

                <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                    <div class="col-span-full">
                        <label for="tmdb-api" class="block text-sm font-medium mb-2 dark:text-white">TMDB API
                            key</label>
                        <div class="mt-2">
                            <input oninput="" type="text" name="tmdb-api" id="tmdb-api" autocomplete="tmdb-api"
                                   class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                                   placeholder="Your TMDB API key">
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-b border-gray-900/10 dark:border-white/50 pb-12">
                <h2 class="text-base font-semibold leading-7 text-gray-900 dark:text-white">Caching</h2>
                <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">You will enter here informations
                    about the cache</p>
                <br>
                <div class="relative flex gap-x-3">
                    <div class="flex h-6 items-center">
                        <input oninput="" id="cache" name="cache" value="cache" type="checkbox"
                               class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600" checked>
                    </div>
                    <div class="text-sm leading-6">
                        <label for="cache" class="block text-sm font-medium mb-2 dark:text-white">Enable cache</label>
                        <p class="text-gray-500 dark:text-gray-300">Enable caching for faster results</p>
                    </div>
                </div>
            </div>

            <div class="border-b border-gray-900/10 dark:border-white/50 pb-12">
                <h2 class="text-base font-semibold leading-7 text-gray-900 dark:text-white">Filtering</h2>
                <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">Set-up here your filtering
                    parameters. Suiting results
                    is a must :)</p>

                <div class="mt-10 space-y-10">
                    <fieldset>
                        <legend class="text-sm font-semibold leading-6 text-gray-900 dark:text-white">Sorting</legend>
                        <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">Choose the sorting that suits
                            you the best.</p>

                        <div class="mt-6 space-y-6">
                            <div class="relative flex gap-x-3">
                                <div class="flex h-6 items-center">
                                    <input oninput="" id="quality" name="sorting" value="quality" type="radio"
                                           class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"
                                           checked>
                                </div>
                                <div class="text-sm leading-6">
                                    <label for="quality"
                                           class="block text-sm font-medium mb-2 dark:text-white">Quality</label>
                                    <p class="text-gray-500 dark:text-gray-300">Get the best quality on top</p>
                                </div>
                            </div>
                            <div class="relative flex gap-x-3">
                                <div class="flex h-6 items-center">
                                    <input oninput="" id="sizedesc" name="sorting" value="sizedesc" type="radio"
                                           class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                </div>
                                <div class="text-sm leading-6">
                                    <label for="sizedesc" class="block text-sm font-medium mb-2 dark:text-white">Size
                                        descending</label>
                                    <p class="text-gray-500 dark:text-gray-300">Filter results by size descending</p>
                                </div>
                            </div>
                            <div class="relative flex gap-x-3">
                                <div class="flex h-6 items-center">
                                    <input oninput="" id="sizeasc" name="sorting" value="sizeasc" type="radio"
                                           class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                </div>
                                <div class="text-sm leading-6">
                                    <label for="sizeasc" class="block text-sm font-medium mb-2 dark:text-white">Size
                                        ascending</label>
                                    <p class="text-gray-500 dark:text-gray-300">Filter results by size ascending</p>
                                </div>
                            </div>
                            <div class="relative flex gap-x-3">
                                <div class="flex h-6 items-center">
                                    <input oninput="" id="qualitythensize" name="sorting" value="qualitythensize"
                                           type="radio"
                                           class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                </div>
                                <div class="text-sm leading-6">
                                    <label for="qualitythensize" class="block text-sm font-medium mb-2 dark:text-white">Quality
                                        then
                                        size</label>
                                    <p class="text-gray-500 dark:text-gray-300">Filter results by quality then size
                                        descending</p>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-sm font-semibold leading-6 text-gray-900 dark:text-white">Quality
                            Exclusion
                        </legend>
                        <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">Check qualities that you want
                            to exclude</p>
                        <div class="mt-6 space-y-6">
                            <div class="flex items-center gap-x-3">
                                <input oninput="" id="4k" name="4k" type="checkbox"
                                       class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                <label for="4k" class="block text-sm font-medium mb-2 dark:text-white">4k</label>
                            </div>

                            <div class="flex items-center gap-x-3">
                                <input oninput="" id="1080p" name="1080p" type="checkbox"
                                       class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                <label for="1080p"
                                       class="block text-sm font-medium mb-2 dark:text-white">1080p</label>
                            </div>

                            <div class="flex items-center gap-x-3">
                                <input oninput="" id="720p" name="720p" type="checkbox"
                                       class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                <label for="720p" class="block text-sm font-medium mb-2 dark:text-white">720p</label>
                            </div>

                            <div class="flex items-center gap-x-3">
                                <input oninput="" id="480p" name="480p" type="checkbox"
                                       class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                <label for="480p" class="block text-sm font-medium mb-2 dark:text-white">480p</label>
                            </div>

                            <div class="flex items-center gap-x-3">
                                <input oninput="" id="rips" name="rips" type="checkbox"
                                       class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                <label for="rips" class="block text-sm font-medium mb-2 dark:text-white">RIPs (HDRip,
                                    WEBRip, etc.)</label>
                            </div>

                            <div class="flex items-center gap-x-3">
                                <input oninput="" id="cam" name="cam" type="checkbox"
                                       class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                <label for="cam" class="block text-sm font-medium mb-2 dark:text-white">CAMs (CAM,
                                    TS, etc.)</label>
                            </div>

                            <div class="flex items-center gap-x-3">
                                <input oninput="" id="unknown" name="unknown" type="checkbox"
                                       class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600">
                                <label for="unknown"
                                       class="block text-sm font-medium mb-2 dark:text-white">Unknown</label>
                            </div>

                            <div>
                                <label for="exclusion-keywords"
                                       class="block text-sm font-medium mb-2 dark:text-white">Exclusion
                                    Keywords</label>
                                <div class="mt-2">
                                    <input oninput="" type="text" name="exclusion-keywords" id="exclusion-keywords"
                                           autocomplete="exclusion-keywords"
                                           class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                                           placeholder="keyword1, keyword2, keyword3">
                                </div>
                            </div>

                        </div>
                    </fieldset>
                </div>
                <div class="mt-6 space-y-6">
                    <div class="sm:col-span-3">
                        <label for="language" class="block text-sm font-medium mb-2 dark:text-white">Language</label>
                        <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">Choose your languages</p>

                        <div class="multipleSelection mt-2">
                            <div class="selectBox" onclick="showCheckboxes()">
                                <select class="py-3 px-4 pe-9 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600">
                                    <option>Languages</option>
                                </select>
                                <div class="overSelect"></div>
                            </div>

                            <div id="languageCheckBoxes"
                                 class="bg-opacity-70 bg-white dark:bg-opacity-90 dark:bg-gray-900 border-gray-200">
                                <label for="en">
                                    <input type="checkbox" id="en"/>
                                    🇬🇧 (English)
                                </label>

                                <label for="fr">
                                    <input type="checkbox" id="fr"/>
                                    🇫🇷 (French)
                                </label>
                                <label for="es">
                                    <input type="checkbox" id="es"/>
                                    🇪🇸 (Spanish)
                                </label>
                                <label for="de">
                                    <input type="checkbox" id="de"/>
                                    🇩🇪 (German)
                                </label>
                                <label for="it">
                                    <input type="checkbox" id="it"/>
                                    🇮🇹 (Italian)
                                </label>
                                <label for="pt">
                                    <input type="checkbox" id="pt"/>
                                    🇵🇹 (Portugese)
                                </label>
                                <label for="ru">
                                    <input type="checkbox" id="ru"/>
                                    🇷🇺 (Russian)
                                </label>
                                <label for="in">
                                    <input type="checkbox" id="in"/>
                                    🇮🇳 (Indian)
                                </label>
                                <label for="nl">
                                    <input type="checkbox" id="nl"/>
                                    🇳🇱 (Dutch)
                                </label>
                                <label for="hu">
                                    <input type="checkbox" id="hu"/>
                                    🇭🇺 (Hungarian)
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 space-y-6">
                        <div class="sm:col-span-3">
                            <label for="maxSize" class="block text-sm font-medium mb-2 dark:text-white">Maximum
                                size</label>
                            <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">Set a maximum size for
                                your results in
                                GB.</p>

                            <div class="mt-2">
                                <input oninput="" type="text" name="maxSize" id="maxSize" autocomplete="maxSize"
                                       class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                                       placeholder="5">
                            </div>
                        </div>

                    </div>

                    <div class="mt-6 space-y-6">
                        <div class="sm:col-span-3">
                            <label for="maxSize" class="block text-sm font-medium mb-2 dark:text-white">Results per
                                quality</label>
                            <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">Set the amount of maximum
                                results you want
                                per
                                quality.</p>

                            <div class="mt-2">
                                <input oninput="" type="text" name="resultsPerQuality" id="resultsPerQuality"
                                       autocomplete="resultsPerQuality"
                                       class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                                       placeholder="5">
                            </div>
                        </div>

                    </div>

                    <div class="mt-6 space-y-6">
                        <div class="sm:col-span-3">
                            <label for="maxResults" class="block text-sm font-medium mb-2 dark:text-white">Maximum
                                results</label>
                            <p class="mt-1 text-sm leading-6 text-gray-600 dark:text-gray-400">Set the amount of maximum
                                results you
                                want.</p>

                            <div class="mt-2">
                                <input oninput="" type="text" name="maxResults" id="maxResults"
                                       autocomplete="maxResults"
                                       class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                                       placeholder="5">
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="mt-6 flex items-center justify-center gap-x-6">
                <a id="install" onclick="return getLink('link')"
                   class="cursor-pointer rounded-md bg-black px-3 py-2 text-sm font-semibold text-white dark:text-black dark:bg-white shadow-sm hover:bg--500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Install</a>
                <a id="copy" onclick="return getLink('copy')"
                   class="cursor-pointer rounded-md bg-black px-3 py-2 text-sm font-semibold text-white dark:text-black dark:bg-white shadow-sm hover:bg--500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Copy</a>
            </div>
    </form>
</div>
</body>
<script>
    function loadData() {
        var currentUrl = window.location.href;
        var data = currentUrl.match(/\/([^\/]+)\/configure$/);
        if (data) {
            data = atob(data[1]);
            data = JSON.parse(data);
            document.getElementById('jackett-host').value = data.jackettHost;
            document.getElementById('jackett-api').value = data.jackettApiKey;
            document.getElementById('debrid-api').value = data.debridKey;
            document.getElementById('tmdb-api').value = data.tmdbApi;
            document.getElementById('service').value = data.service;
            document.getElementById('exclusion-keywords').value = (data.exclusionKeywords || []).join(', ');
            document.getElementById('maxSize').value = data.maxSize;
            document.getElementById('resultsPerQuality').value = data.resultsPerQuality;
            document.getElementById('maxResults').value = data.maxResults;
            document.getElementById('cache').checked = data.cache;
            document.getElementById('torrenting').checked = data.torrenting;
            if (data.sort === 'quality') {
                document.getElementById('quality').checked = true;
            }
            if (data.sort === 'sizedesc') {
                document.getElementById('sizedesc').checked = true;
            }
            if (data.sort === 'sizeasc') {
                document.getElementById('sizeasc').checked = true;
            }
            if (data.sort === 'qualitythensize') {
                document.getElementById('qualitythensize').checked = true;
            }
            if (data.exclusion.includes('4k')) {
                document.getElementById('4k').checked = true;
            }
            if (data.exclusion.includes('1080p')) {
                document.getElementById('1080p').checked = true;
            }
            if (data.exclusion.includes('720p')) {
                document.getElementById('720p').checked = true;
            }
            if (data.exclusion.includes('480p')) {
                document.getElementById('480p').checked = true;
            }
            if (data.exclusion.includes('rips')) {
                document.getElementById('rips').checked = true;
            }
            if (data.exclusion.includes('cam')) {
                document.getElementById('cam').checked = true;
            }
            if (data.languages.includes('en')) {
                document.getElementById('en').checked = true;
            }
            if (data.languages.includes('fr')) {
                document.getElementById('fr').checked = true;
            }
            if (data.languages.includes('es')) {
                document.getElementById('es').checked = true;
            }
            if (data.languages.includes('de')) {
                document.getElementById('de').checked = true;
            }
            if (data.languages.includes('it')) {
                document.getElementById('it').checked = true;
            }
            if (data.languages.includes('pt')) {
                document.getElementById('pt').checked = true;
            }
            if (data.languages.includes('ru')) {
                document.getElementById('ru').checked = true;
            }
            if (data.languages.includes('in')) {
                document.getElementById('in').checked = true;
            }
            if (data.languages.includes('nl')) {
                document.getElementById('nl').checked = true;
            }
            if (data.languages.includes('hu')) {
                document.getElementById('hu').checked = true;
            }

        }
    }

    let showLanguageCheckBoxes = true;

    function showCheckboxes() {
        let checkboxes = document.getElementById("languageCheckBoxes");

        if (showLanguageCheckBoxes) {
            checkboxes.style.display = "block";
            showLanguageCheckBoxes = false;
        } else {
            checkboxes.style.display = "none";
            showLanguageCheckBoxes = true;
        }
    }

    loadData();

    function getLink(method) {
        const addonHost = new URL(window.location.href).protocol.replace(':', '') + "://" + new URL(window.location.href).host
        const jackettHost = document.getElementById('jackett-host').value;
        const jackettApi = document.getElementById('jackett-api').value;
        const debridApi = document.getElementById('debrid-api').value;
        const tmdbApi = document.getElementById('tmdb-api').value;
        const service = document.getElementById('service').value;
        const exclusionKeywords = document.getElementById('exclusion-keywords').value.split(',').map(keyword => keyword.trim()).filter(keyword => keyword !== '');
        let maxSize = document.getElementById('maxSize').value;
        let resultsPerQuality = document.getElementById('resultsPerQuality').value;
        let maxResults = document.getElementById('maxResults').value;
        const cache = document.getElementById('cache').checked;
        const torrenting = document.getElementById('torrenting').checked;
        const qualityExclusion = [];
        if (document.getElementById('4k').checked) {
            qualityExclusion.push('4k');
        }
        if (document.getElementById('1080p').checked) {
            qualityExclusion.push('1080p');
        }
        if (document.getElementById('720p').checked) {
            qualityExclusion.push('720p');
        }
        if (document.getElementById('480p').checked) {
            qualityExclusion.push('480p');
        }
        if (document.getElementById('rips').checked) {
            qualityExclusion.push('rips');
        }
        if (document.getElementById('cam').checked) {
            qualityExclusion.push('cam');
        }
        const languages = [];
        if (document.getElementById('en').checked) {
            languages.push('en')
        }
        if (document.getElementById('fr').checked) {
            languages.push('fr')
        }
        if (document.getElementById('es').checked) {
            languages.push('es')
        }
        if (document.getElementById('de').checked) {
            languages.push('de')
        }
        if (document.getElementById('it').checked) {
            languages.push('it')
        }
        if (document.getElementById('pt').checked) {
            languages.push('pt')
        }
        if (document.getElementById('ru').checked) {
            languages.push('ru')
        }
        if (document.getElementById('in').checked) {
            languages.push('in')
        }
        if (document.getElementById('nl').checked) {
            languages.push('nl')
        }
        if (document.getElementById('hu').checked) {
            languages.push('hu')
        }

        let qualityChecked = document.getElementById('quality').checked;
        let sizedescChecked = document.getElementById('sizedesc').checked;
        let sizeascChecked = document.getElementById('sizeasc').checked;
        let qualitythensizeChecked = document.getElementById('qualitythensize').checked;
        let filter;
        if (qualityChecked) {
            filter = 'quality';
        }
        if (sizedescChecked) {
            filter = 'sizedesc';
        }
        if (sizeascChecked) {
            filter = 'sizeasc';
        }
        if (qualitythensizeChecked) {
            filter = 'qualitythensize';
        }
        if (maxSize === '' || isNaN(maxSize)) {
            maxSize = 0;
        }
        if (maxResults === '' || isNaN(maxResults)) {
            maxResults = 5;
        }
        if (resultsPerQuality === '' || isNaN(resultsPerQuality)) {
            resultsPerQuality = 1;
        }
        let data = {
            addonHost,
            jackettHost,
            'jackettApiKey': jackettApi,
            service,
            'debridKey': debridApi,
            maxSize,
            exclusionKeywords,
            languages,
            'sort': filter,
            resultsPerQuality,
            maxResults,
            'exclusion': qualityExclusion,
            tmdbApi,
            cache,
            torrenting
        };
        if (jackettHost === '' || jackettApi === '' || debridApi === '' || tmdbApi === '' || languages.length === 0) {
            alert('Please fill all the fields');
            return false;
        }
        let stremio_link = `${window.location.host}/${btoa(JSON.stringify(data))}/manifest.json`;

        if (method === 'link') {
            window.open(`stremio://${stremio_link}`, "_blank");
        } else if (method === 'copy') {
            const link = window.location.protocol + '//' + stremio_link;

            if (!navigator.clipboard) {
                alert('Your browser does not support clipboard');
                console.log(link);
                return;
            }

            navigator.clipboard.writeText(link).then(() => {
                alert('Link copied to clipboard');
            }, () => {
                alert('Error copying link to clipboard');
            });
        }
    }


</script>
</html>